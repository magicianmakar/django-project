{% extends "supplements/tab_view_base.html" %}
{% load static %}

{% block tab_content %}

{% if show_alert %}
<div class="alert alert-success alert-dismissable">
  <button aria-hidden="true" data-dismiss="alert" class="close" type="button">Ã—</button>
  Your label has been submitted for approval, and you can follow its status
  on this page. You will receive an email if any action is needed.
</div>
{% endif %}

<div class='label-title'>
  <h3>Labels</h3>
</div>

<hr />

<div>
  {% include "supplements/partials/label_filter_form.html" %}
</div>

<div class='label-count'>
  <strong>Found {{ label_count }}</strong>
</div>

<table class='table table-striped'>
  <thead>
    <th>Status</th>
    <th>Supplement</th>
    <th>Label SKU</th>
    <th>User</th>
    <th>Date</th>
    <th>Comments</th>
    <th>View</th>
    <th>Download</th>
  </thead>
  <tbody>
    {% for label in labels %}
    <tr>
      <td>
        <span class='label
        {% if label.status == "approved" %}
        label-primary
        {% elif label.status == "awaiting" %}
        label-warning
        {% elif label.status == "rejected" %}
        label-danger
        {% endif %}'>
          {{ label.status_string }}
        </span>
      </td>
      <td>{{ label.user_supplement.title }}</td>
      <td>{{ label.sku }}</td>
      <td>{{ label.user_supplement.user.get_full_name }}</td>
      <td>{{ label.updated_at_string }}</td>
      <td><i class="fa fa-envelope"></i>&nbsp;{{ label.comment_count }}</td>
      <td><a href="{% url 'pls:label_detail' label_id=label.id %}" class="btn btn-default btn-outline btn-xs">View</a></td>
      <td><a href="{{ label.url }}" target="_blank" class="btn btn-default btn-outline btn-xs">Download</a></td>
    {% empty %}
      <td colspan="8">No labels found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% include "supplements/partials/paging.html" %}

{% endblock %}

{% block extrajs %}
<script type="text/javascript" src="{% static '/pls/js/common.js' %}"></script>
<script type="text/javascript" src="{% static 'libs/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' %}"></script>
<script type='application/javascript'>
  $("#id_date").datepicker();
</script>
{% endblock %}
