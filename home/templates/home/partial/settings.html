{% load perms_helper template_helper %}

{% if user|can:'product_import_settings.use' %}
<div id="tab-product" class="tab-pane active">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            <input type="hidden" name="from" value="webapp">
            {% if user|can:'auto_margin.use' %}
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="auto_margin" class="control-label">
                            Price Markup Percentage
                            {% include 'partial/help_tooltip.html' with help="For example: If you set Price Markup to <b>50%</b>, a product that costs $10.00 will be set to $15.00." qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text"
                           data-regular="[^\d\%]"
                           class="form-control js_validate_input" id="auto_margin" name="auto_margin"
                           value="{% if config.auto_margin != '%' %}{{config.auto_margin}}{% endif %}">
                        <div class="has-error js_validate_input-message"
                             data-message="Price Markup is not valid"
                             style="display:none">
                            <span class="help-block">Invalid Price markup.</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label for="auto_compare_at" class="control-label">
                            Compare At Price Markup Percentage
                            {% include 'partial/help_tooltip.html' with help="For example: If set to <b>50%</b>, a product that costs <i>(after Auto Margin)</i> $10.00 will be compared to $15.00" qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text"
                               data-regular="[^\d\%]"
                               class="form-control js_validate_input" id="auto_compare_at" name="auto_compare_at"
                               value="{% if config.auto_compare_at != '%' %}{{config.auto_compare_at}}{% endif %}">
                        <div class="has-error js_validate_input-message"
                             data-message="Compare At Price Markup is not valid"
                             style="display:none">
                            <span class="help-block">Invalid Price Markup.</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label for="default_weight_number" class="control-label">Fixed Weight</label>
                        <input type="text"
                               data-regular="[^\d\.]"
                               class="form-control text-center js_validate_input"
                               id="default_weight_number"
                               name="default_weight_number"
                               value="{{config.default_weight_number}}">
                        <div class="has-error js_validate_input-message"
                             data-message="Fixed Weight is not valid"
                             style="display:none">
                            <span class="help-block">Invalid Fixed Weight.</span>
                        </div>
                        <span class="help-block "></span>
                    </div>
                </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                  <div class="form-group">
                      <label for="auto_margin_cents" class="control-label">
                          Price Cents Value
                         {% include 'partial/help_tooltip.html' with help="For example: If you set Price Cents Value to <b>95</b>, product price will end always by .95" qtipstyle="color:#BBB" %}
                      </label>
                      <input type="text"
                             data-regular="[^\d\.]"
                             class="form-control js_validate_input"
                             id="auto_margin_cents"
                             name="auto_margin_cents"
                             value="{{config.auto_margin_cents}}">
                      <div class="has-error js_validate_input-message"
                           data-message="Price Cents Value is not valid"
                           style="display:none">
                          <span class="help-block">Invalid Price Cents Value.</span>
                      </div>
                  </div>
              </div>

              <div class="col-md-4">
                  <div class="form-group">
                      <label for="auto_compare_at_cents" class="control-label">
                              Compare At Price Cents Value
                          {% include 'partial/help_tooltip.html' with help="For example: If you set Compare At Price Cents Value to <b>95</b>, product compare price will end always by .95" qtipstyle="color:#BBB" %}
                      </label>
                      <input type="text"
                             data-regular="[^\d\.]"
                             class="form-control js_validate_input"
                             id="auto_compare_at_cents"
                             name="auto_compare_at_cents"
                             value="{{config.auto_compare_at_cents}}">
                      <div class="has-error js_validate_input-message"
                           data-message="Compare At Price Cents Value is not valid"
                           style="display:none">
                          <span class="help-block">Invalid Price Cents Value.</span>
                      </div>
                  </div>
              </div>

              <div class="col-md-4">
                  <div class="form-group">
                      <label for="default_weight_unit" class="control-label">
                          Default Weight Unit
                          {% include 'partial/help_tooltip.html' with help="Set the unit of Weight to use in your Store. Weights are especially useful when creating weight based shipping rates." qtipstyle="color:#BBB" %}
                      </label>
                      <select id="default_weight_unit" name="default_weight_unit" class="form-control">
                          <option value="g" {% if config.default_weight_unit == 'g' %}selected="selected"{% endif %}>g</option>
                          <option value="kg" {% if config.default_weight_unit == 'kg' %}selected="selected"{% endif %}>kg</option>
                          <option value="oz" {% if config.default_weight_unit == 'oz' %}selected="selected"{% endif %}>oz</option>
                          <option value="lb" {% if config.default_weight_unit == 'lb' %}selected="selected"{% endif %}>lb</option>
                      </select>
                      <span class="help-block "></span>
                  </div>
              </div>
            </div>

            {% endif %}

            <div class="row">
                <div class="col-md-6 m-t m-l">
                    <div class="form-group">
                        <label class="control-label">
                            <a class="edit-markup-rules-btn" href="#">Advanced Markup Rules</a>
                            {% if user|can:'advance_markup.use' %}
                                {% include 'partial/help_tooltip.html' with help="Create several markup rules which are applied to items based on their price." qtipstyle="color:#BBB" %}
                            {% endif %}
                        </label>
                    </div>
                </div>
                <div class="col-md-12"><hr /></div>
            </div>


            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="description_mode" class="control-label">
                            Default Product Description
                            {% include 'partial/help_tooltip.html' with help="<p><b>Empty</b>: No description will be used.</p><p><b>Original</b>: The full Supplier product description will be pre-populated.</p><p><b>Simplified</b>: The product specs portion of the Supplier description will be pre-populated.</p><p><b>Custom</b>: The custom description entered below will be pre-populated.</p>" qtipstyle="color:#BBB" %}
                        </label>
                        <select id="description_mode" name="description_mode" class="form-control">
                            <option value="empty" {% if config.description_mode == 'empty' %}selected="selected"{% endif %}>Empty</option>
                            <option value="original" {% if config.description_mode == 'original' %}selected="selected"{% endif %}>Original</option>
                            <option value="simplified" {% if config.description_mode == 'simplified' %}selected="selected"{% endif %}>Simplified</option>
                            <option value="custom" {% if config.description_mode == 'custom' %}selected="selected"{% endif %}>Custom</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-8">
                  <div id="desc-div" class="form-group" {% if config.description_mode != 'custom' %} style="display:none" {% endif %}>
                    <label for="default_desc" class="control-label">
                      Default Description
                      {% include 'partial/help_tooltip.html' with help="<p>Available Custom Tags:</p> <p><b>{{title}}</p></b> <p><b>{{description_full}}</p></b> <p><b>{{description_simplified}}</p></b> <p><b>{{price}}</p></b> <p><b>{{compare_at_price}}</p></b> <p><b>{{weight}}</p></b> <p><b>{{vendor}}</p></b> <p><b>{{type}}</p></b>" qtipstyle="color:#BBB" %}
                    </label>
                    <textarea name="default_desc" id="default_desc" cols="30" rows="10" class="form-control">{{config.default_desc}}</textarea>
                  </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 m-t m-l">
                    <div class="form-group">
                        <label class="control-label">
                            <a class="edit-custom-templates-btn" href="#">Custom Product Descriptions...</a>
                        </label>
                    </div>
                </div>
                <div class="col-md-12"><hr /></div>
            </div>


            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="make_visisble"
                            name="make_visisble" {% if config.make_visisble or config.make_visisble is None %}checked="checked"{% endif %}>
                        <label for="make_visisble" class="control-label">
                            Make Products Visible
                            {% include 'partial/help_tooltip.html' with help="You'll want to enable this option to ensure products you import with Dropified are visible on your store." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="initial_inventory_sync"
                            name="initial_inventory_sync" {% if config.initial_inventory_sync or config.initial_inventory_sync is None %}checked="checked"{% endif %}>
                        <label for="initial_inventory_sync" class="control-label">
                            Sync Product Inventory when importing products
                            {% include 'partial/help_tooltip.html' with help="Enable this option to import the inventory quantities from AliExpress and eBay to your store." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="supplier_change_inventory_sync"
                            name="supplier_change_inventory_sync" {% if config.supplier_change_inventory_sync or config.supplier_change_inventory_sync is None %}checked="checked"{% endif %}>
                        <label for="supplier_change_inventory_sync" class="control-label">
                            Sync Product Inventory when changing Suppliers
                            {% include 'partial/help_tooltip.html' with help="When you switch suppliers enable this option to automatically sync inventory with the new supplier." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="update_product_vendor"
                            name="update_product_vendor" {% if config.update_product_vendor %}checked="checked"{% endif %}>
                        <label for="update_product_vendor" class="control-label">
                            Update Product Vendor when Default Supplier is changed
                            {% include 'partial/help_tooltip.html' with help="Enable this option to automatically update and display the supplier's name as the Vendor name in your store." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="randomize_image_names"
                            name="randomize_image_names" {% if config.randomize_image_names %}checked="checked"{% endif %}>
                        <label for="randomize_image_names" class="control-label">
                            Randomize Images file names when importing products
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif%}

{% if user|can:'auto_order.view' %}
{% with can_use=user|can:'auto_order.use' %}
<div id="tab-fulfill" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            <div class="row">
                <div class="col-md-4">
                    <label for="order_phone_number" class="control-label">
                        Order Phone Number
                        {% include 'partial/help_tooltip.html' with help="The phone number to be used with Auto Order from Suppliers" qtipstyle="color:#BBB" %}
                    </label>
                    <input type="text" class="form-control" {% if can_use %}id="order_phone_number" name="order_phone_number" value="{{config.order_phone_number}}"{% endif %}>
                    <div id="phone-invalid" class="has-error">
                        <span class="help-block">Invalid Phone number, AliExpress allows only numbers and hyphens.</span>
                    </div>
                </div>

                <div class="col-md-8 m-t-lg">
                    <div class="form-group m-t-xs">
                        <input type="checkbox" name="order_default_phone" id="order_default_phone" value="customer" class="js-switch"
                            {% if config.order_default_phone == 'customer' %}checked="checked"{% endif %}>
                        <label for="order_default_phone" class="control-label">
                            Use the Customer’s Phone Number if present
                            {% include 'partial/help_tooltip.html' with help="Use the Customer’s Phone Number if present. Only use the <b>Order Phone Number</b> if Customer Phone Number isn’t present." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row m-t-sm">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="order_custom_note" class="control-label">
                                Custom Note To The Supplier
                            {% include 'partial/help_tooltip.html' with help="This message will be passed to the supplier.<br>You could include a message similar to '<b>Please do not include an invoice as we are dropshipping</b>'." qtipstyle="color:#BBB" %}
                        </label>
                        {% if can_use %}
                        <textarea id="order_custom_note" name="order_custom_note" rows="3" class="form-control">{{config.order_custom_note}}</textarea>
                        {% else %}
                        <input type="text" class="form-control">
                        {% endif %}
                        <span class="help-block"></span>
                    </div>
                </div>
            </div>

            <div class="row m-t">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="aliexpress_shipping_method" class="control-label">
                            AliExpress Shipping Method
                            {% include 'partial/help_tooltip.html' with help="Automatically selects the chosen shipping method on AliExpress for all items." qtipstyle="color:#BBB" %}
                        </label>
                        <select id="aliexpress_shipping_method" name="aliexpress_shipping_method" class="form-control">
                            <option value="" {% if aliexpress_shipping_method == '' %}selected="selected"{% endif %}>Default</option>
                            <option value="EMS_ZX_ZX_US" {% if aliexpress_shipping_method == 'EMS_ZX_ZX_US' %}selected="selected"{% endif %}>ePacket</option>
                            <option value="CAINIAO_STANDARD" {% if aliexpress_shipping_method == 'CAINIAO_STANDARD' %}selected="selected"{% endif %}>AliExpress Standard Shipping</option>
                            <option value="CPAM" {% if aliexpress_shipping_method == 'CPAM' %}selected="selected"{% endif %}>China Post Registered Air Mail</option>
                            <option value="YANWEN_JYT" {% if aliexpress_shipping_method == 'YANWEN_JYT' %}selected="selected"{% endif %}>China Post Ordinary Small Packet Plus</option>
                            <option value="EMS" {% if aliexpress_shipping_method == 'EMS' %}selected="selected"{% endif %}>EMS</option>
                            <option value="DHL" {% if aliexpress_shipping_method == 'DHL' %}selected="selected"{% endif %}>DHL</option>
                            <option value="TNT" {% if aliexpress_shipping_method == 'TNT' %}selected="selected"{% endif %}>TNT</option>
                            <option value="UPSE" {% if aliexpress_shipping_method == 'UPSE' %}selected="selected"{% endif %}>UPS Expedited</option>
                            <option value="UPS" {% if aliexpress_shipping_method == 'UPS' %}selected="selected"{% endif %}>UPS Express Saver</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12"><hr /></div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="auto_shopify_fulfill" class="control-label">
                            Automatically Fulfill
                            {% include 'partial/help_tooltip.html' with help="Tracked orders will be automatically fulfilled in your store when Dropified detects a tracking number from the supplier." qtipstyle="color:#BBB" %}
                        </label>
                        <select id="auto_shopify_fulfill" name="auto_shopify_fulfill" class="form-control">
                            <option value="disable" {% if not config.auto_shopify_fulfill or config.auto_shopify_fulfill == 'disable' %}selected="selected"{% endif %}>Disable</option>
                            <option value="enable" {% if config.auto_ordered_mark == None or config.auto_shopify_fulfill == 'enable' %}selected="selected"{% endif %}>Enable</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-8 m-t-lg">
                    <div class="form-group m-t-xs">
                        <input type="checkbox" class="js-switch" id="auto_ordered_mark"
                            name="auto_ordered_mark" {% if config.auto_ordered_mark == None or config.auto_ordered_mark %}checked="checked"{% endif %}>
                        <label for="auto_ordered_mark" class="control-label">
                            Automatically Mark as Ordered
                            {% include 'partial/help_tooltip.html' with help="Automatically add the supplier Order ID back to Dropified when you click <b>'Place Order'</b>. Enabling this is recommended." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group shiping-confirmation">
                        <label for="send_shipping_confirmation" class="control-label">
                            Send Shipping Confirmation
                            {% include 'partial/help_tooltip.html' with help="Select <b>Auto</b> to notify the customer once all the items in their order have been shipped. Select <b>Always</b> to send an email as each item is shipped." qtipstyle="color:#BBB" %}
                        </label>
                        <select id="send_shipping_confirmation" name="send_shipping_confirmation" class="form-control">
                            <option value="default" {% if not config.send_shipping_confirmation or config.send_shipping_confirmation == 'default' %}selected="selected"{% endif %}>Auto</option>
                            <option value="yes" {% if config.send_shipping_confirmation == 'yes' %}selected="selected"{% endif %}>Always</option>
                            <option value="no" {% if config.send_shipping_confirmation == 'no' %}selected="selected"{% endif %}>Never</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-8 m-t-lg">
                    <div class="form-group shiping-confirmation m-t-xs">
                        <input type="checkbox" class="js-switch" id="validate_tracking_number" name="validate_tracking_number"
                            {% if config.validate_tracking_number %}
                            checked="checked"
                            {% endif %}>
                        <label for="validate_tracking_number" class="control-label">
                            Only when Tracking Number is valid
                            {% include 'partial/help_tooltip.html' with help="Send Confirmation Email only if the tracking number is valid (can be tracked using AfterShip or USPS)" qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row" style="display:none">
                <div class="col-md-4">
                    <div class="form-group">
                        <input type="checkbox"
                            id="shipping_method_filter"
                            name="shipping_method_filter"
                            class="js-switch" {% if config.shipping_method_filter %}checked disabled{% endif %}
                        />
                        <label for="shipping_method_filter" class="control-label">
                            Shipment Method Filter
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endwith %}
{% endif %}

{% if user|can:'aliexpress_settings.use' %}
<div id="tab-aliexpress" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            {% if user|can:'aliexpress_captcha.use' %}
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <input id="aliexpress_solve_captcha" name="aliexpress_solve_captcha" type="checkbox"
                            class="js-switch" {% if config.aliexpress_solve_captcha == None or config.aliexpress_solve_captcha %}checked{% endif %} />
                        <label for="aliexpress_solve_captcha" class="control-label">
                            Enable Auto Captcha Solving
                            {% include 'partial/help_tooltip.html' with help="Automatically solves the Captcha codes on AliExpress. We recommend enabling this for full automation." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="aliexpress_fix_address"
                            name="aliexpress_fix_address" {% if config.aliexpress_fix_address == None or config.aliexpress_fix_address %}checked="checked"{% endif %}>
                        <label for="aliexpress_fix_address" class="control-label">
                            Fix AliExpress Address Province Selection issues
                            {% include 'partial/help_tooltip.html' with help="Select 'Other' in AliExpress province if the customer entered province is not found" qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row option-config-row" {% if config.aliexpress_fix_address != None and not config.aliexpress_fix_address %}style="display:none"{% endif %}>
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="aliexpress_fix_city"
                            name="aliexpress_fix_city" {% if config.aliexpress_fix_city == None or config.aliexpress_fix_city %}checked="checked"{% endif %}>
                        <label for="aliexpress_fix_city" class="control-label">
                            Fix AliExpress Address City Selection issues
                            {% include 'partial/help_tooltip.html' with help="If the U.S. City the user entered is not found in the AliExpress dropdown, the app will select “Other” from the dropdown and add the City name to second address input (Also apply to Spain customers).<br><br>This option is only a workaround the AliExpress limitation. <b>Please enable it only if you understand the behavior and it works for you. We do not recommend or guarantee your packages will be delivered because of this.</b>" qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            {% if user|can:'aliexpress_affiliate.use' and not user|can:'admitad_affiliate.use' %}
            <div class="row">
                <div class="col-md-12"><hr /></div>
            </div>
            <h3>AliExpress Affiliate Program</h3>
            <div class="row m-t-lg">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="aliexpress_affiliate_key" class="control-label">API Key</label>
                        <input type="text" class="form-control" id="aliexpress_affiliate_key" name="aliexpress_affiliate_key" value="{{config.aliexpress_affiliate_key}}">
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label for="aliexpress_affiliate_tracking" class="control-label">Tracking ID</label>
                        <input type="text" class="form-control" id="aliexpress_affiliate_tracking" name="aliexpress_affiliate_tracking" value="{{config.aliexpress_affiliate_tracking}}">
                    </div>
                </div>
            </div>

            {% elif user|can:'admitad_affiliate.use' %}
            <div class="row">
                <div class="col-md-12"><hr /></div>
            </div>
            <h3>Admitad Affiliate Program</h3>
            <div class="row m-t-lg">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="admitad_site_id" class="control-label">
                            Site ID or Deeplink {% include 'partial/help_tooltip.html' with help="<a href='https://help.admitad.com/en/topic/21-what-is-deeplink/' target='_blank'>How to find my Deeplink?</a>" qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text" class="form-control" id="admitad_site_id" name="admitad_site_id"
                        {% if config.admitad_site_id %}
                            value="https://alitems.com/g/{{config.admitad_site_id}}/"
                        {% endif %}
                        >
                    </div>
                </div>
            </div>
            {% endif %}

            {% if user|can:'aliexpress_api_integration.use' %}
            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-12">
                    <h3 class="pull-left">AliExpress Accounts</h3>
                    <a href="{% url 'aliexpress.oauth' %}" class="btn btn-success btn-small pull-right">Link Aliexpress Account <i class="fa fa-plus"></i></a>
                </div>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Added</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for account in aliexpress_accounts %}
                    <tr>
                        <td>{{ account.aliexpress_username }} ({{ account.aliexpress_user_id }})</td>
                        <td style="white-space: nowrap;">{% date_humanize account.created_at %}</td>
                        <td class="text-right">
                            <a href="#" class="del-aliexpress-account text-danger" data-account="{{ account.id }}">
                                <i class="dropified-icons di-trash" style="font-size: 15px;"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div class="row">
                <div class="col-sm-12">

                </div>
            </div>
            {% endif %}

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif %}

{% if user|can:'price_change_options.use' %}
<div id="tab-alerts" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            {% if upsell_alerts %}
                {% if user.profile.plan.support_addons %}
                    {% include "common/partial/upsell.html" with addon_id=93 message="Add Alerts to your Plan" only %}
                {% else %}
                    {% include "common/partial/upsell.html" with addon_id='' message="Please upgrade your Plan to add Alerts" only %}
                {% endif %}
            {% endif %}
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="alert_price_change" class="control-label">When the price changes</label>
                        <select id="alert_price_change" name="alert_price_change" class="form-control">
                            <option value="notify" {% if config.alert_price_change == 'notify' %} selected="selected"{% endif %}>Notify me</option>
                            <option value="update" {% if config.alert_price_change == 'update' %} selected="selected"{% endif %}>Update Price in Store</option>
                            <option value="none" {% if config.alert_price_change == 'none' %} selected="selected"{% endif %}>Do nothing</option>
                        </select>
                    </div>
                </div>

                <div class="price-update-option" data-value="update">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="price_update_method" class="control-label">Price Update Method</label>
                            <select id="price_update_method" name="price_update_method" class="form-control">
                                <option value="global_markup" {% if config.price_update_method == 'global_markup' %} selected="selected"{% endif %}>Update with Global "Price Markup"</option>
                                <option value="custom_markup" {% if config.price_update_method == 'custom_markup' %} selected="selected"{% endif %}>Update with Advanced Markup Rules</option>
                                <option value="same_margin" {% if not config.price_update_method or config.price_update_method == 'same_margin' %} selected="selected"{% endif %}>Update with same margins</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-6 m-t-lg">
                        <div class="form-group m-t-xs">
                            <input type="checkbox" class="js-switch" id="price_update_for_increase"
                                name="price_update_for_increase" {% if config.price_update_for_increase %}checked="checked"{% endif %}>
                            <label for="price_update_for_increase" class="control-label">
                                Update only when price goes up
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="alert_quantity_change" class="control-label">When inventory changes</label>
                        <select id="alert_quantity_change" name="alert_quantity_change" class="form-control">
                            <option value="notify" {% if config.alert_quantity_change == 'notify' %} selected="selected"{% endif %}>Notify me</option>
                            <option value="update" {% if config.alert_quantity_change == 'update' %} selected="selected"{% endif %}>Update automatically</option>
                            <option value="none" {% if config.alert_quantity_change == 'none' %} selected="selected"{% endif %}>Do nothing</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="alert_product_disappears" class="control-label">When a product disappears</label>
                        <select id="alert_product_disappears" name="alert_product_disappears" class="form-control">
                            <option value="notify" {% if config.alert_product_disappears == 'notify' %} selected="selected"{% endif %}>Notify me</option>
                            <option value="unpublish" {% if config.alert_product_disappears == 'unpublish' %} selected="selected"{% endif %}>Unpublish product</option>
                            <option value="zero_quantity" {% if config.alert_product_disappears == 'zero_quantity' %} selected="selected"{% endif %}>Set the quantity to zero</option>
                            <option value="none" {% if config.alert_product_disappears == 'none' %} selected="selected"{% endif %}>Do nothing</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="alert_variant_disappears" class="control-label">When a variant disappears</label>
                        <select id="alert_variant_disappears" name="alert_variant_disappears" class="form-control">
                            <option value="notify" {% if config.alert_variant_disappears == 'notify' %} selected="selected"{% endif %}>Notify me</option>
                            <option value="remove" {% if config.alert_variant_disappears == 'remove' %} selected="selected"{% endif %}>Remove the variant</option>
                            <option value="zero_quantity" {% if config.alert_variant_disappears == 'zero_quantity' %} selected="selected"{% endif %}>Set the quantity to zero</option>
                            <option value="none" {% if config.alert_variant_disappears == 'none' %} selected="selected"{% endif %}>Do nothing</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="alert_order_cancelled" class="control-label">When an order is cancelled</label>
                        <select id="alert_order_cancelled" name="alert_order_cancelled" class="form-control">
                            <option value="none" {% if config.alert_order_cancelled == 'none' %} selected="selected"{% endif %}>Do nothing</option>
                            <option value="notify" {% if config.alert_order_cancelled == 'notify' %} selected="selected"{% endif %}>Notify me with e-mail</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row m-t-xs">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="send_alerts_to_subusers"
                            name="send_alerts_to_subusers" {% if config.send_alerts_to_subusers %}checked="checked"{% endif %}>
                        <label for="send_alerts_to_subusers" class="control-label">
                            Send Alert to Sub Users too
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif %}

{% if user|can:'orders.use' %}
<div id="tab-orders" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="aliexpress_as_notes" name="aliexpress_as_notes" type="checkbox"
                            class="js-switch" {% if config.aliexpress_as_notes or config.aliexpress_as_notes == None %}checked{% endif %} />
                        <label for="aliexpress_as_notes" class="control-label">
                            Save Supplier Order ID as standard Order Notes
                            {% include 'partial/help_tooltip.html' with help="Automatically saves the Supplier Order ID in the Notes field in your store - this may be visible to some customers." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="aliexpress_as_custom_note" name="aliexpress_as_custom_note" type="checkbox"
                            class="js-switch" {% if config.aliexpress_as_custom_note %}checked{% endif %} />
                        <label for="aliexpress_as_custom_note" class="control-label">
                            Save Supplier Order ID as Additional Details
                            {% include 'partial/help_tooltip.html' with help="Automatically saves the Supplier Order ID in the additional details field in Shopify - this may be visible to some customers." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="aliexpress_as_order_tag" name="aliexpress_as_order_tag" type="checkbox"
                            class="js-switch" {% if config.aliexpress_as_order_tag %}checked{% endif %} />
                        <label for="aliexpress_as_order_tag" class="control-label">
                            Save Supplier Order ID as Order Tag
                            {% include 'partial/help_tooltip.html' with help="Dropified can automatically add the Supplier Order ID as a Tag, making them searchable from within your Shopify store." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="order_custom_line_attr" name="order_custom_line_attr" type="checkbox"
                            class="js-switch" {% if config.order_custom_line_attr %}checked{% endif %} />
                        <label for="order_custom_line_attr" class="control-label">
                            Send Custom Line Attributes along with the note to the seller
                            {% include 'partial/help_tooltip.html' with help="If you sell products where the user is able to customize the item then you’ll find our Custom Line Attributes feature useful. This will send a custom note to the supplier with the product details.<br>Learn more about this <a href='http://help.dropified.com/orders/placing-orders/how-do-i-add-a-custom-message-to-each-product' target='_blank'>here</a>" qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="order_risk_levels_enabled" name="order_risk_levels_enabled" type="checkbox"
                            class="js-switch" {% if config.order_risk_levels_enabled %}checked{% endif %} />
                        <label for="order_risk_levels_enabled" class="control-label">
                            Enable Order Risk Levels
                            {% include 'partial/help_tooltip.html' with help="If you're using Shopify Payments, enable this option to show the Fraud risk for  transactions on your Dropified orders page. Great to spot those high risk orders before you place them!" qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input id="sync_delay_notify" name="sync_delay_notify" type="checkbox"
                            class="js-switch" {% if config.sync_delay_notify %}checked{% endif %} />
                        <label for="sync_delay_notify" class="control-label">
                            Enable notification(s) for delayed Tracking Number syncing
                            {% include 'partial/help_tooltip.html' with help="Enable this option to be notified if your supplier hasn't shipped an order within X days." qtipstyle="color:#BBB" %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="sync-delay-config" {% if not config.sync_delay_notify %}style="display:none"{% endif %}>
                <div class="row m-b">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="sync_delay_notify_days" class="control-label col-md-9">
                                Notify if tracking number is not found after (in days)
                            </label>
                            <div class="col-md-3">
                              <input type="number" id="sync_delay_notify_days" name="sync_delay_notify_days" class="form-control text-center"
                                  value="{% if config.sync_delay_notify_days %}{{config.sync_delay_notify_days}}{% endif %}"
                                  min="1" max="30" />
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 m-t-sm">
                        <div class="form-group">
                            <input id="sync_delay_notify_email" name="sync_delay_notify_email" type="checkbox"
                                class="js-switch" {% if config.sync_delay_notify_email %}checked{% endif %} />
                            <label for="sync_delay_notify_email" class="control-label">Notify By Email</label>
                        </div>
                    </div>

                    <div class="col-md-3 m-t-sm">
                        <div class="form-group">
                            <input id="sync_delay_notify_push" name="sync_delay_notify_push" type="checkbox"
                                class="js-switch" {% if config.sync_delay_notify_push %}checked{% endif %} />
                            <label for="sync_delay_notify_push" class="control-label">Notify By Push Notification</label>
                        </div>
                    </div>

                    <div class="col-md-3 m-t-sm">
                        <div class="form-group">
                            <input id="sync_delay_notify_highlight" name="sync_delay_notify_highlight" type="checkbox"
                                class="js-switch" {% if config.sync_delay_notify_highlight %}checked{% endif %} />
                            <label for="sync_delay_notify_highlight" class="control-label">Highlight Orders On Tracking Page</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="aliexpress_order_tags" class="control-label">
                            Tags - Order Placed
                            {% include 'partial/help_tooltip.html' with help="Create the following tag(s) on the Shopify order when order is placed on AliExpress" qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text" id="aliexpress_order_tags" placeholder="Tags" name="aliexpress_order_tags" class="tag-it" value="{% if config.aliexpress_order_tags %}{{config.aliexpress_order_tags}}{% endif %}" />
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="tracking_number_tags" class="control-label">
                            Tags - Tracking Number Added
                            {% include 'partial/help_tooltip.html' with help="Create the following tag(s) on the Shopify order when tracking number is added to Dropified" qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text" id="tracking_number_tags" placeholder="Tags" name="tracking_number_tags" class="tag-it" value="{% if config.tracking_number_tags %}{{config.tracking_number_tags}}{% endif %}" />
                    </div>
                </div>
                <div class="col-md-12"><hr /></div>
            </div>

            {% if user|can:'pls.use' %}
            <h3>Private Label Ordering</h3>
            {% if 'ZONOS_API_KEY'|app_setting_filter %}
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <input type="checkbox" class="js-switch" id="pl_pay_taxes"
                            name="pl_pay_taxes" {% if config.pl_pay_taxes %}checked="checked"{% endif %}>
                        <label for="pl_pay_duties_taxes" class="control-label">
                            Pre-pay Duties & Taxes
                            <i class="fa fa-fw fa-question-circle" qtip-tooltip="Preselect payment for duties and taxes before creating orders" style="color:#BBB" data-hasqtip="29"></i>
                        </label>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="row m-t-lg">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="" class="control-label m-b">
                            Default Shipping Option
                            {% include 'partial/help_tooltip.html' with help="Whenever multiple shipping options are available, the preselected option for shipping shown before placing the order" qtipstyle="color:#BBB" %}
                        </label>

                        <div>
                            <label class="control-label">
                                <input type="radio" name="pl_default_shipping_option" value="standard" class="icheck"
                                {% if config.pl_default_shipping_option == 'standard' or not config.pl_default_shipping_option %}checked="checked"{% endif %}>
                                Standard
                                {% include 'partial/help_tooltip.html' with help="An economical option for shipping, enable this to have the cheapest option marked as default" qtipstyle="color:#BBB" %}
                            </label>

                            <label class="control-label m-l-lg">
                                <input type="radio" name="pl_default_shipping_option" value="expedited" class="icheck"
                                {% if config.pl_default_shipping_option == 'expedited' %}checked="checked"{% endif %} >
                                Expedited
                                {% include 'partial/help_tooltip.html' with help="A faster option for shipping, enable this to have the priciest option marked as default" qtipstyle="color:#BBB" %}
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif %}

{% if user|can:'alibaba_integration.use' %}
<div id="alibaba-settings" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            <h3>Your Account</h3>
            <div class="row m-t-lg">
                <div class="col-md-12">
                    <label for="" class="control-label">
                        {% if user.alibaba.first.is_expired %}
                        Alibaba expired your access on {{ user.alibaba.first.expired_at|date:"M jS Y" }}
                        - please update this
                        {% elif user.alibaba.first.is_nearly_expired %}
                        Alibaba will automatically expire your access on {{ user.alibaba.first.expired_at|date:"M jS Y" }}
                        - please update this
                        {% elif user.alibaba.first.access_token %}
                        An account is connected and is up to date
                        {% else %}
                        An account is not connected
                        {% endif %}
                    </label>
                </div>
            </div>
            <div class="row m-t">
                <div class="col-md-12">
                    <a href="{{ alibaba_login_url }}" class="btn btn-primary small">
                        {% if user.alibaba.first.is_expired %}
                        Re-Connect Account
                        {% elif user.alibaba.first.access_token %}
                        Re-Connect Account
                        {% else %}
                        Connect Account
                        {% endif %}
                    </a>
                </div>
                <div class="col-md-12"><hr /></div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="alibaba_default_import" class="control-label">
                            Import Products To
                        </label>
                        <select id="alibaba_default_import" name="alibaba_default_import" class="form-control">
                            <optgroup label="Save For Later">
                                <option value="shopify" {% if config.alibaba_default_import == 'shopify' %}selected{% endif %}>Shopify</option>
                                <option value="chq" {% if config.alibaba_default_import == 'chq' %}selected{% endif %}>CommerceHQ</option>
                                <option value="woo" {% if config.alibaba_default_import == 'woo' %}selected{% endif %}>WooCommerce</option>
                                <option value="gkart" {% if config.alibaba_default_import == 'gkart' %}selected{% endif %}>GrooveKart</option>
                                <option value="bigcommerce" {% if config.alibaba_default_import == 'bigcommerce' %}selected{% endif %}>BigCommerce</option>
                            </optgroup>
                            <optgroup></optgroup>
                            <optgroup label="Send To Store">
                                {% for store in user_stores.all %}
                                <option value="{{ store.store_type_key }}"
                                        {% if config.alibaba_default_import == store.store_type_key %}
                                        selected="selected"
                                        {% endif %}
                                    >{{ store.title }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="col-md-4 m-l m-t-lg m-b">
                    {% if user.alibaba.first.ecology_token %}
                    <a target="_blank"
                       href="{% url 'alibaba:products' %}">
                        <i class="fa fa-external-link"></i> Access Dropshipping Products
                    </a>
                    {% else %}
                    <span qtip-tooltip="Connect your Alibaba account to see dropshipping products">
                        <a href="javascript:;">
                            <i class="fa fa-external-link"></i> Access Dropshipping Products
                        </a>
                    </span>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="alibaba_default_shipping" class="control-label">
                            Default Shipping Option (when found)
                        </label>
                        <select id="alibaba_default_shipping" name="alibaba_default_shipping" class="form-control">
                            <option></option>
                            {% for shipping in 'ALIBABA_COMMON_SHIPPINGS'|app_setting_filter %}
                            <option value="{{ shipping.code }}" {% if config.alibaba_default_shipping == shipping.code %}selected="selected"{% endif %}>{{ shipping.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif %}

{% if user|can:'ebay.use' and user.profile.get_sd_accounts|length and ebay_settings %}
<div id="ebay-settings" class="tab-pane">
    <div class="panel-body">
        <form class="config-form" action="" method="post">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ebay_business_country" class="control-label">
                            Default Business Country
                            {% include 'partial/help_tooltip.html' with help="The country in which the business is registered." qtipstyle="color:#BBB" %}
                        </label>
                        <select class="form-control" id="ebay_business_country" name="ebay_business_country"
                                data-placeholder="Business Country">
                            <option value="">Select Business Country...</option>
                            {% for item in countries %}
                            <option value="{{item.0}}" {% if ebay_settings.business_country == item.0 %} selected="selected" {% endif %}>
                                {{item.1}}
                            </option>
                            {% endfor %}
                        </select>
                        <div id="ebay_business_country_invalid" class="has-error" style="display:none">
                            <span class="help-block">Invalid business country</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ebay_business_country_zipcode" class="control-label">
                            Default Business Zip Code
                            {% include 'partial/help_tooltip.html' with help="The country ZIP code in which the business is registered." qtipstyle="color:#BBB" %}
                        </label>
                        <input type="text" class="form-control" id="ebay_business_country_zipcode" name="ebay_business_country_zipcode"
                            value="{{ebay_settings.business_zip}}">
                        <div id="ebay_business_country_zipcode_invalid" class="has-error" style="display:none">
                            <span class="help-block">Invalid business country zipcode</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12"><hr /></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <button class="btn btn-primary btn-lg">
                            Save <i class="fa fa-save"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endif %}
