{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Add Page{% endblock %}

{% block main-container %}

<form method="post" class="well-box form" role="form">
 {% csrf_token %}

    <div class="row form-group {% if form.title.errors %}has-error has-feedback{% endif %}">
        <label class="control-label" for="title">{{ form.title.errors|striptags }}</label>
        <div class="col-xs-12 col-sm-8 col-md-8">
            {% render_field form.title class+="form-control input-lg" placeholder="Page Title" %}
     </div>
    </div>

    <div class="form-group {% if form.body.errors %}has-error has-feedback{% endif %}">
        <label class="control-label" for="body">{{ form.body.errors|striptags }}</label>
        <div class="controls">
            {% render_field form.body cols="40" rows="10" style="width: 99%" %}
        </div>
    </div>

    <div class="form-group {% if form.body.errors %}has-error has-feedback{% endif %}">
        <label class="control-label" for="body">{{ form.body.errors|striptags }}</label>
        <label class="" for="tags">Tags</label>
        <div class="controls">
            {% render_field form.tags class+="form-control input-md tag-it" placeholder="Tags" %}
        </div>
    </div>
    <div class="form-group {% if form.body.errors %}has-error has-feedback{% endif %}">
        <label class="control-label" for="stat">{{ form.stat.errors|striptags }}</label>
        <label class="" for="stat">Publish Status</label>
        <div class="controls">
            {% render_field form.stat class+="form-control input-md " placeholder="Tags" %}
        </div>
    </div>

    <p><input type="submit" name="" value="Submit" class="btn btn-primary btn-lg" /></p>

</form>

{% endblock %}

{% block extracss %}
<link href="//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet">
<link href="//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css" rel="stylesheet">
<link href="{% static 'css/jquery.tagit.min.css' %}" rel="stylesheet">
{% endblock %}

{% block extrajs %}
    <script type="text/javascript">
        var bootstrapButton = $.fn.button.noConflict() // return $.fn.button to previously assigned value
        $.fn.bootstrapBtn = bootstrapButton            // give $().bootstrapBtn the Bootstrap functionality
    </script>

    <script type="text/javascript" src="//code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script type="text/javascript" src="{% static 'js/tag-it.min.js' %}"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/ckeditor/4.4.5/ckeditor.js" type="text/javascript"></script>

    <script type="text/javascript">
        var source_variants = {{tags|safe}};

        $(function() {
            $(".tag-it").tagit({
                availableTags: source_variants,
                autocomplete: {delay: 0, minLength: 0},
                showAutocompleteOnFocus: true
            });

            {% if article.body_format != 'markdown' %}
            setup_admin_editor('body', true);
            {% endif %}
        });

    </script>
{% endblock %}
