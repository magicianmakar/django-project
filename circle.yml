machine:
  python:
    version: 2.7.11

  services:
    - redis

  environment:
    DATABASE_URL: postgresql://ubuntu:@127.0.0.1:5432/
    REDISCLOUD_URL: redis://localhost:6391


dependencies:
  override:
    - source ./scripts/prepare_build.sh
    - source venv/bin/activate
    - pip install -r requirements.txt
  cache_directories:
    - "venv"


test:
  override:
    - flake8
    - python manage.py test
